<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COBOL Legacy Pro | CLC Assessment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700&family=JetBrains+Mono&display=swap');
        
        body { background-color: #08090a; color: #d1d5db; font-family: 'Outfit', sans-serif; }
        .gold-line { background: linear-gradient(90deg, transparent, #c5a059, transparent); height: 1px; width: 100%; }
        .onyx-panel { background: #111316; border: 1px solid #1f2124; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .rose-gold-text { color: #b76e79; }
        .btn-vault { 
            background-color: #c5a059; 
            color: #000; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 2px;
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
            border: 1px solid #c5a059;
        }
        .btn-vault:hover { background-color: transparent; color: #c5a059; box-shadow: 0 0 30px rgba(197, 160, 89, 0.2); }
        .terminal-bg { background-color: #0d0e10; border-left: 2px solid #c5a059; font-family: 'JetBrains Mono', monospace; }
        
        /* Realistic Black Diamond Accent */
        .black-diamond {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #2c2c2c 0%, #000000 100%);
            transform: rotate(45deg);
            border: 1px solid #333;
            box-shadow: 1px 1px 2px rgba(255,255,255,0.05);
        }
    </style>
</head>
<body class="p-6 lg:p-12">
    <div class="max-w-7xl mx-auto">
        
        <header class="flex flex-col md:flex-row justify-between items-end mb-12 border-b border-white/5 pb-8">
            <div class="flex items-center gap-6">
                <div class="w-16 h-16 border border-[#c5a059] flex items-center justify-center relative">
                    <div class="absolute -top-1 -right-1 black-diamond"></div>
                    <span class="text-3xl">üõ°Ô∏è</span>
                </div>
                <div>
                    <h1 class="text-4xl font-light tracking-widest text-white uppercase">COBOL <span class="font-bold">Legacy Pro</span></h1>
                    <p class="text-[10px] tracking-[0.5em] text-gray-500 uppercase mt-2 italic">A Proprietary CLC Assessment Engine</p>
                </div>
            </div>
            <div class="mt-6 md:mt-0 flex items-center gap-4">
                <div class="text-right mr-4 hidden md:block">
                    <p class="text-[9px] uppercase tracking-widest text-gray-600">Secure Link Established</p>
                    <p class="text-[10px] text-[#c5a059] font-bold uppercase">Fireserver Sync v.4.2</p>
                </div>
                <a href="https://cal.com/onyx.offensive" target="_blank" class="btn-vault px-10 py-4 text-[10px]">Book Briefing</a>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            <div class="lg:col-span-4 space-y-8">
                <div class="onyx-panel p-8 rounded-sm">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="black-diamond"></div>
                        <h2 class="text-xs font-bold uppercase tracking-[0.3em] text-white">Environment</h2>
                    </div>
                    <select id="sampleSelect" onchange="loadSample()" class="w-full bg-black border border-white/10 p-4 rounded-none text-sm text-gray-300 focus:outline-none focus:border-[#c5a059] transition">
                        <option value="vulnerable">Mainframe Bank Settlement</option>
                        <option value="atm">ATM Logic Controller</option>
                        <option value="secure">Hardened Perimeter</option>
                    </select>
                    <p id="sampleDesc" class="text-[11px] text-gray-500 mt-6 leading-relaxed border-t border-white/5 pt-6 italic"></p>
                </div>

                <div class="onyx-panel p-8 rounded-sm">
                    <h3 class="text-[10px] font-bold mb-8 uppercase text-gray-500 tracking-[0.4em]">Audit Parameters</h3>
                    <div class="space-y-6">
                        <div class="flex items-center justify-between text-[11px]">
                            <span class="text-gray-400">Heuristic Depth</span>
                            <span class="text-white font-bold">L-Advanced</span>
                        </div>
                        <div class="gold-line opacity-20"></div>
                        <div class="flex items-center justify-between text-[11px]">
                            <span class="text-gray-400">Pattern Library</span>
                            <span class="text-white font-bold">Cobol-Pro-X</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="onyx-panel rounded-sm overflow-hidden">
                    <div class="flex items-center justify-between px-8 py-5 bg-black/40 border-b border-white/5">
                        <div class="flex items-center gap-4">
                            <span class="text-[10px] uppercase tracking-widest text-gray-500">Source Protocol</span>
                        </div>
                        <button onclick="checkAndRunScan()" class="btn-vault px-8 py-3 text-[9px]">Initiate Scan</button>
                    </div>
                    <textarea id="cobolCode" class="terminal-bg w-full h-[550px] p-10 focus:outline-none text-sm text-[#c5a059]/80 leading-relaxed" spellcheck="false"></textarea>
                </div>
            </div>
        </div>

        <div id="results" class="mt-12 hidden"></div>

        <footer class="mt-24 pb-12 text-center">
            <div class="mb-8 flex justify-center gap-2">
                <div class="black-diamond"></div>
                <div class="black-diamond scale-125 opacity-50"></div>
                <div class="black-diamond"></div>
            </div>
            <p class="text-white font-bold text-lg tracking-[0.8em] uppercase">CLC</p>
            <p class="text-gray-600 text-[10px] tracking-[0.3em] uppercase mt-2">Professional Legacy Intelligence</p>
        </footer>
    </div>

    <div id="demoEmailModal" class="hidden fixed inset-0 bg-[#08090a]/fb backdrop-blur-xl flex items-center justify-center z-50 p-6">
        <div class="onyx-panel max-w-md w-full p-12 rounded-none border-t-2 border-[#c5a059] shadow-2xl">
            <h3 class="text-2xl font-light text-white mb-2 uppercase tracking-tighter text-center">Clearance Required</h3>
            <p class="text-[10px] text-gray-500 mb-10 text-center tracking-widest uppercase">Authorized CLC Access Token Needed</p>
            <form onsubmit="unlockDemoScanner(event)" class="space-y-6">
                <input type="text" id="demoName" required placeholder="Name" class="w-full bg-transparent border-b border-white/10 p-4 text-white focus:border-[#c5a059] outline-none transition" />
                <input type="email" id="demoEmail" required placeholder="Corporate Email" class="w-full bg-transparent border-b border-white/10 p-4 text-white focus:border-[#c5a059] outline-none transition" />
                <button type="submit" class="btn-vault w-full py-5 mt-6">Authorize Sync</button>
            </form>
        </div>
    </div>

    <script>
        // Logic maintained for backend connectivity
        function closeDemoModal() { document.getElementById('demoEmailModal').classList.add('hidden'); }
        function checkAndRunScan() {
            if (localStorage.getItem('clc_authorized') !== 'true') {
                document.getElementById('demoEmailModal').classList.remove('hidden');
                return;
            }
            runScan();
        }
        function unlockDemoScanner(event) {
            event.preventDefault();
            fetch('https://formspree.io/f/mblnyqlb', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: document.getElementById('demoName').value, email: document.getElementById('demoEmail').value, _subject: 'CLC NEW AUTHORIZATION' })
            }).finally(() => {
                localStorage.setItem('clc_authorized', 'true');
                document.getElementById('demoEmailModal').classList.add('hidden');
                runScan();
            });
        }
        const samples = {
            vulnerable: { desc: 'HEURISTIC ALERT: SQL Construction via Accept string detected. Risk level: Critical.', code: '       IDENTIFICATION DIVISION.\n       PROGRAM-ID. BANK-SETTLE.\n       PROCEDURE DIVISION.\n           ACCEPT INPUT-VAR FROM CONSOLE.\n           STRING "SELECT * FROM LEDGER WHERE ID=\'" INPUT-VAR "\'" INTO SQL-CMD.\n           MOVE "ADMIN_CRED_992" TO MASTER-KEY.\n           DISPLAY "PII DATA: " SSN-NUM.\n           STOP RUN.' },
            atm: { desc: 'HEURISTIC ALERT: Static key verification found in ATM procedure logic.', code: '       IDENTIFICATION DIVISION.\n       PROGRAM-ID. ATM-CORE.\n       WORKING-STORAGE SECTION.\n       01 M-KEY PIC X(16) VALUE "OVERRIDE_8822".\n       PROCEDURE DIVISION.\n           IF PIN = M-KEY THEN PERFORM DISPENSE.' },
            secure: { desc: 'INTEGRITY PASS: Standard parameterized execution detected. No high-risk strings found.', code: '       IDENTIFICATION DIVISION.\n       PROGRAM-ID. SECURE-BANK.\n       PROCEDURE DIVISION.\n           EXEC SQL PREPARE STMT FROM \'SELECT * FROM ACCOUNTS WHERE ID = ?\' END-EXEC.' }
        };
        function loadSample() {
            const val = document.getElementById('sampleSelect').value;
            document.getElementById('sampleDesc').textContent = samples[val].desc;
            document.getElementById('cobolCode').value = samples[val].code;
        }
        function runScan() {
            const code = document.getElementById('cobolCode').value;
            const findings = [];
            if (/STRING.*INTO.*SQL/i.test(code)) findings.push({t: 'Logic Injection', s: 'CRITICAL', f: 'Parameterized Execution'});
            if (/MOVE.*TO.*(?:PASS|KEY)/i.test(code)) findings.push({t: 'Auth Exposure', s: 'CRITICAL', f: 'Vault Integration Required'});
            if (/DISPLAY.*(?:SSN|CREDIT)/i.test(code)) findings.push({t: 'Data Leak', s: 'HIGH', f: 'Field Masking Required'});
            const res = document.getElementById('results');
            res.classList.remove('hidden');
            if (findings.length === 0) {
                res.innerHTML = '<div class="onyx-panel p-12 text-center text-white text-[10px] tracking-[0.5em] uppercase border-t border-green-500/30">Protocol Integrity: Verified</div>';
            } else {
                res.innerHTML = `<div class="onyx-panel p-12"><h2 class="text-xs font-bold mb-10 text-white uppercase tracking-[0.4em]">Audit Report</h2><div class="space-y-6">${findings.map(f => `<div class="border-b border-white/5 pb-6 flex justify-between items-center"><div><p class="text-[11px] font-bold text-white uppercase tracking-widest">${f.t}</p><p class="text-[9px] text-gray-500 mt-1 uppercase tracking-tighter">${f.f}</p></div><span class="text-[10px] text-[#c5a059] border border-[#c5a059] px-4 py-1 font-bold uppercase">${f.s}</span></div>`).join('')}</div></div>`;
            }
            res.scrollIntoView({ behavior: 'smooth' });
        }
        window.onload = loadSample;
    </script>
</body>
</html>
