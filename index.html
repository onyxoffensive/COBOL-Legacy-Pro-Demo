<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COBOL Legacy Pro | CLC Assessment Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0d0e12; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .gold-border { border-color: #d4af37; }
        .rose-gold-text { color: #b76e79; }
        .glass-panel { background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(12px); border: 1px solid rgba(183, 110, 121, 0.15); }
        .btn-gold { background: linear-gradient(145deg, #d4af37, #aa8c2e); color: #000; font-weight: 700; transition: all 0.3s ease; letter-spacing: 0.05em; }
        .btn-gold:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2); background: #e5c158; }
        .editor-bg { background-color: #16181d; border: 1px solid #2d2f36; color: #d4af37; font-family: 'Fira Code', 'Courier New', monospace; }
        input, select { background: #1c1f26 !important; border: 1px solid #3f424a !important; color: #fff !important; }
        .status-pulse { height: 8px; width: 8px; background-color: #b76e79; border-radius: 50%; display: inline-block; box-shadow: 0 0 8px #b76e79; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-6xl mx-auto">
        
        <div class="glass-panel rounded-2xl p-8 mb-10 border-b-2 gold-border shadow-2xl">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <span class="status-pulse"></span>
                        <span class="text-[10px] tracking-[0.3em] text-gray-500 uppercase font-bold">Encrypted Connection Active</span>
                    </div>
                    <h1 class="text-4xl font-light tracking-tight">COBOL <span class="rose-gold-text font-bold">Legacy Pro</span></h1>
                    <p class="text-gray-500 text-xs mt-1 tracking-widest uppercase">Proprietary Heuristic Engine v4.0</p>
                </div>
                <div class="flex items-center gap-6">
                    <a href="https://cal.com/onyx.offensive" target="_blank" class="btn-gold px-10 py-4 rounded-full text-xs shadow-lg">
                        SCHEDULE BRIEFING
                    </a>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
            <div class="lg:col-span-4 space-y-6">
                <div class="glass-panel p-6 rounded-2xl">
                    <h2 class="text-sm font-bold mb-4 uppercase tracking-widest rose-gold-text">Infrastructure</h2>
                    <select id="sampleSelect" onchange="loadSample()" class="w-full p-4 rounded-xl text-sm focus:outline-none focus:ring-1 focus:ring-yellow-600">
                        <option value="vulnerable">Bank Settlement v1.2 (Vulnerable)</option>
                        <option value="atm">ATM Logic Module (Critical)</option>
                        <option value="secure">Hardened Perimeter (Secure)</option>
                    </select>
                    <p id="sampleDesc" class="text-[11px] text-gray-500 mt-4 leading-relaxed italic"></p>
                </div>

                <div class="glass-panel p-6 rounded-2xl border-l-2 border-yellow-700/50">
                    <h3 class="text-xs font-bold mb-4 uppercase text-gray-400">Scan Parameters</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between text-[11px] border-b border-gray-800 pb-2">
                            <span class="text-gray-500">Heuristic Depth</span>
                            <span class="rose-gold-text font-bold">L3 Advanced</span>
                        </div>
                        <div class="flex justify-between text-[11px] border-b border-gray-800 pb-2">
                            <span class="text-gray-500">Mainframe Sync</span>
                            <span class="text-green-600 font-bold">Enabled</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="glass-panel p-1 rounded-2xl overflow-hidden border border-gray-800">
                    <div class="flex items-center justify-between px-6 py-4 bg-white/5 border-b border-gray-800">
                        <span class="text-[10px] font-bold tracking-widest text-gray-400 uppercase">COBOL Source Console</span>
                        <button onclick="checkAndRunScan()" class="btn-gold px-6 py-2 rounded-full text-[10px]">
                            RUN ASSESSMENT
                        </button>
                    </div>
                    <textarea id="cobolCode" class="editor-bg w-full h-[500px] p-8 focus:outline-none text-sm leading-relaxed" placeholder="Awaiting manual code injection..."></textarea>
                </div>
            </div>
        </div>

        <div id="demoEmailModal" class="hidden fixed inset-0 bg-black/95 backdrop-blur-md flex items-center justify-center z-50 p-6">
            <div class="glass-panel max-w-md w-full p-10 rounded-3xl border-2 gold-border shadow-[0_0_50px_rgba(212,175,55,0.1)]">
                <form onsubmit="unlockDemoScanner(event)">
                    <div class="text-center mb-8">
                        <div class="inline-block p-4 rounded-full bg-yellow-500/10 mb-4">
                            <svg class="w-8 h-8 gold-border text-[#d4af37]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold rose-gold-text">Clearance Required</h3>
                        <p class="text-xs text-gray-500 mt-2">Submit credentials to sync with Fireserver.</p>
                    </div>
                    
                    <div class="space-y-4">
                        <input type="text" id="demoName" required placeholder="Full Name" class="w-full px-5 py-4 rounded-xl text-sm" />
                        <input type="email" id="demoEmail" required placeholder="Corporate Email" class="w-full px-5 py-4 rounded-xl text-sm" />
                        <input type="text" id="demoPosition" required placeholder="Security Role" class="w-full px-5 py-4 rounded-xl text-sm" />
                        
                        <button type="submit" class="btn-gold w-full py-5 rounded-xl mt-4 text-xs shadow-2xl">INITIATE SYNC</button>
                        <button type="button" onclick="closeDemoModal()" class="w-full text-gray-600 hover:text-white transition text-[10px] uppercase tracking-widest mt-4 font-bold">Abort Connection</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="results" class="mt-10 hidden"></div>

        <div class="text-center mt-24 pb-20 border-t border-gray-900 pt-10">
            <p class="rose-gold-text font-black text-2xl tracking-tighter mb-1">CLC</p>
            <p class="text-gray-600 text-[9px] tracking-[0.5em] uppercase font-bold">Boutique Legacy Defense â€¢ St. Paul's Bay</p>
            <div class="mt-8 flex justify-center gap-10 text-[10px] uppercase tracking-widest font-bold">
                <a href="https://cal.com/onyx.offensive" class="text-gray-500 hover:text-[#d4af37] transition">Inquiry</a>
                <a href="https://github.com/onyxoffensive/wraith20" class="text-gray-500 hover:text-[#d4af37] transition">GitHub</a>
            </div>
        </div>
    </div>

    <script>
        function closeDemoModal() { document.getElementById('demoEmailModal').classList.add('hidden'); }

        function checkAndRunScan() {
            if (localStorage.getItem('clc_authorized') !== 'true') {
                document.getElementById('demoEmailModal').classList.remove('hidden');
                return;
            }
            runScan();
        }

        function unlockDemoScanner(event) {
            event.preventDefault();
            const payload = {
                name: document.getElementById('demoName').value,
                email: document.getElementById('demoEmail').value,
                role: document.getElementById('demoPosition').value,
                _subject: 'CLC FIRESYNC: New Authorized Access',
                timestamp: new Date().toISOString()
            };

            // FIRESYNC GATEWAY
            fetch('https://formspree.io/f/mblnyqlb', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            }).finally(() => {
                localStorage.setItem('clc_authorized', 'true');
                document.getElementById('demoEmailModal').classList.add('hidden');
                runScan();
            });
        }

        const samples = {
            vulnerable: {
                desc: 'Mainframe SETTLEMENT-V1: Detected high-probability SQL injection and unsecured PII strings.',
                code: `       IDENTIFICATION DIVISION.\n       PROGRAM-ID. SETTLE-V1.\n\n       PROCEDURE DIVISION.\n           ACCEPT INPUT-VAR FROM CONSOLE.\n           STRING "SELECT * FROM LEDGER WHERE ID='" INPUT-VAR "'" INTO SQL-CMD.\n           MOVE "DB_ADMIN_PASS_99" TO DB-KEY.\n           DISPLAY "CUST-SSN: " SSN-DATA.\n           STOP RUN.`
            },
            atm: {
                desc: 'ATM-CORE-LOGIC: Hardcoded master overrides found in procedure division.',
                code: `       IDENTIFICATION DIVISION.\n       PROGRAM-ID. ATM-CORE.\n\n       WORKING-STORAGE SECTION.\n       01 MASTER-KEY PIC X(16) VALUE "OVERRIDE_8822".\n\n       PROCEDURE DIVISION.\n           IF INPUT-PIN = MASTER-KEY THEN\n               PERFORM DISPENSE-CASH.\n           STOP RUN.`
            },
            secure: {
                desc: 'Hardened Perimeter: All heuristic checks passed. Parameterized queries identified.',
                code: `       IDENTIFICATION DIVISION.\n       PROGRAM-ID. SECURE-BANK.\n\n       PROCEDURE DIVISION.\n           EXEC SQL\n               PREPARE STMT FROM 'SELECT * FROM ACCOUNTS WHERE ID = ?'\n           END-EXEC.\n           EXEC SQL\n               EXECUTE STMT USING :ACCT-ID\n           END-EXEC.`
            }
        };

        function loadSample() {
            const val = document.getElementById('sampleSelect').value;
            document.getElementById('sampleDesc').textContent = samples[val].desc;
            document.getElementById('cobolCode').value = samples[val].code;
        }

        function runScan() {
            const code = document.getElementById('cobolCode').value;
            const findings = [];
            const lines = code.split('\n');
            
            lines.forEach((l, i) => {
                if (/STRING.*INTO.*SQL/i.test(l)) findings.push({t: 'Injection Risk', s: 'CRITICAL', f: 'Use Parameterized EXEC SQL.'});
                if (/MOVE.*TO.*(?:PASS|KEY|SECRET)/i.test(l)) findings.push({t: 'Auth Exposure', s: 'CRITICAL', f: 'Move to Fireserver Vault.'});
                if (/DISPLAY.*(?:SSN|CREDIT|PASS)/i.test(l)) findings.push({t: 'Data Leak', s: 'HIGH', f: 'Apply Field Masking.'});
            });

            const resultsDiv = document.getElementById('results');
            resultsDiv.classList.remove('hidden');
            
            if (findings.length === 0) {
                resultsDiv.innerHTML = `<div class="glass-panel p-10 text-center rounded-2xl border-green-900/30 text-green-400 text-xs font-bold tracking-[0.2em] uppercase">Perimeter Integrity Verified. No Critical Risks Identified.</div>`;
            } else {
                resultsDiv.innerHTML = `
                <div class="glass-panel p-10 rounded-2xl border-red-900/20">
                    <h2 class="text-sm font-bold mb-8 rose-gold-text uppercase tracking-widest">Heuristic Findings</h2>
                    <div class="space-y-4">
                        ${findings.map(f => `
                            <div class="bg-white/5 border-l-2 gold-border p-6 flex justify-between items-center rounded-r-xl">
                                <div><p class="text-xs font-bold text-gray-200 uppercase tracking-tighter">${f.t}</p><p class="text-[10px] text-gray-500 mt-1 italic">${f.f}</p></div>
                                <span class="text-[9px] font-black text-red-500 border border-red-500/30 px-3 py-1 rounded-full uppercase">Critical Risk</span>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            }
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        window.onload = loadSample;
    </script>
</body>
</html>
